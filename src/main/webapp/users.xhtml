<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="sidebar.xhtml">

    <ui:define name="pageTitle">Users Management</ui:define>
    <ui:define name="pageSubtitle">Monitor and manage users on the platform</ui:define>

    <ui:define name="content">
        <h:outputStylesheet name="css/users.css"/>

        <h:form id="usersForm">

            <!-- ðŸ” Search Bar -->
            <p:panel header="Search Users" style="margin-bottom: 1rem;">
                <p:inputText id="searchTerm" value="#{usersCDIBean.searchTerm}" 
                             placeholder="Enter name or email..." style="width:300px; margin-right:10px" />
                <p:commandButton value="Search" icon="pi pi-search" update="usersTable"
                                 action="#{usersCDIBean.searchUsers}" />
                <p:commandButton value="Reset" icon="pi pi-refresh" update="usersTable,searchTerm"
                                 action="#{usersCDIBean.init}" styleClass="ui-button-secondary" />
            </p:panel>

            <!-- ðŸ“‹ Users Table -->
            <p:dataTable id="usersTable" value="#{usersCDIBean.userList}" var="user"
                         styleClass="user-table" paginator="true" rows="5"
                         emptyMessage="No users found.">

                <p:column headerText="ID">
                    <h:outputText value="#{user.userID}"/>
                </p:column>

                <p:column headerText="Name">
                    <h:outputText value="#{user.fullName}"/>
                </p:column>

                <p:column headerText="Email">
                    <h:outputText value="#{user.email}"/>
                </p:column>

                <p:column headerText="Role">
                    <h:outputText value="#{user.role}"/>
                </p:column>

                <p:column headerText="Subscription Status">
                    <p:tag value="#{user.subscriptionStatus ? 'Yes' : 'No'}"
                           severity="#{user.subscriptionStatus ? 'success' : 'danger'}"/>
                </p:column>

            </p:dataTable>
        </h:form>
    </ui:define>
</ui:composition>
</html>
